@model IEnumerable<GlowifyBeauty.Models.Products>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="format-detection" content="telephone=no">
	<meta name="it-rating" content="it-rat-cd303c3f80473535b3c667d0d67a7a11">
	<meta name="cmsmagazine" content="3f86e43372e678604d35804a67860df7">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1">
	<title>Glowify Beauty</title>
	<meta name='description' content="" />
	<meta name="keywords" content="" />
	<link rel="icon" type="image/x-icon" href=@Url.Content("/Content/img/favicon.ico") />
	<link rel="preload stylesheet" href=@Url.Content("/Content/css/style.css") as="style">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body class="loaded">


    <!-- BEGIN BODY -->

    <div class="main-wrapper">

        <!-- BEGIN CONTENT -->

        <main class="content">
            <!-- BEGIN DETAIL MAIN BLOCK -->
            <div class="detail-block detail-block_margin">
                <div class="wrapper">
                    <div class="detail-block__content">
                        <h1>Cart</h1>
                        <ul class="bread-crumbs">
                            <li class="bread-crumbs__item">
                                <a href="index.html" class="bread-crumbs__link">Home</a>
                            </li>
                            <li class="bread-crumbs__item">Cart</li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- DETAIL MAIN BLOCK EOF   -->
            <!-- BEGIN CART -->
            @{
    int grandTotal = 0;
    bool allItemsValid = true;
    
}
         

            <div class="cart">
                <div class="wrapper">
                    <div class="cart-table">
                        <div class="cart-table__box">
                            <div class="cart-table__row cart-table__row-head">
                                <div class="cart-table__col">Product</div>
                                <div class="cart-table__col">Price</div>
                                <div class="cart-table__col">Quantity</div>
                                <div class="cart-table__col">Total</div>
                                                                <div class="cart-table__col">Remove</div>

                            </div>
                            @foreach(var item in Model)
                            {
                                int tqty = 0;
                                tqty = item.ProductPrice * item.Qty;
                                grandTotal = grandTotal + tqty;

                                if (item.Qty < 1)
                                {
                                    allItemsValid = false;
                                }

                                
                                String img64 = Convert.ToBase64String(item.Img1);
                                String img64Url = string.Format("data:image/" + item.Img1type + ";base64,{0}", img64);

                            <div class="cart-table__row">
                                <div class="cart-table__col">
                                    <a href='@Url.Action("ProductDetails", "Home", new { id = item.Product_Id })' class="cart-table__img">
                                        <img  src="@img64Url" class="js-img" alt="">
                                    </a>
                                    <div class="cart-table__info">
                                        <a href='@Url.Action("ProductDetails", "Home", new { id = item.Product_Id })' class="title5">@item.ProductName</a>
                                    </div>
                                </div>
                                <div class="cart-table__col">
                                    <span class="cart-table__price">@item.ProductPrice /Rs</span>
                                </div>
                                <div class="cart-table__col">
                                    <div class="cart-table__quantity">
                                        <div class="counter-box">
                                            <span class="counter-link counter-link__prev"  onclick="window.location.href='@Url.Action("Decrease", "Cart", new { id = item.Cart_ID })';"><i class="icon-arrow"></i></span>
                                            <input type="text" class="counter-input" disabled value="@item.Qty">
                                            <span class="counter-link counter-link__next" onclick="window.location.href='@Url.Action("Increase", "Cart", new { id = item.Cart_ID })';"><i class="icon-arrow"></i></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="cart-table__col">
                                    <span class="cart-table__total"><a href='@Url.Action("Remove", "Cart", new { id = item.Cart_ID })' class="blog-item__link">Remove <i class="icon-arrow-md"></i></a></span>
                                </div>

                            </div>
                            }
                           

                        </div>
                    </div>
                    <div class="cart-bottom">
                        <div class="cart-bottom__promo">
                         
                            
                            
                        </div>
                        <div class="cart-bottom__total">
                           
                            <div class="cart-bottom__total-num">
                                total:
                                <span>@grandTotal</span>
                            </div>


                        @if (allItemsValid && Model != null)
            
{
    var firstItem = Model.FirstOrDefault();
                              if (firstItem != null)
                {                               
                            <a href='@Url.Action("OrderStatus", "Order", new { id = Model.FirstOrDefault().Account_id,TotalPrice=grandTotal})' class="btn">Checkout</a>
                        }    
                            }
                            
                        </div>
                    </div>
                </div>
               
            </div>
                 
             

             
          
            <!-- CART EOF   -->
            <!-- BEGIN INSTA PHOTOS -->
            <!-- INSTA PHOTOS EOF   -->

        </main>

        <!-- CONTENT EOF   -->

        <!-- BEGIN HEADER -->

		<header class="header">
		@{
    var userRole = Session["roles"] as string; // Null check and type casting
}

			<div class="header-content" >
				<div class="header-logo">
					<img src=@Url.Content("/Content/img/header-logo.svg") style="margin-left:50px" alt="">
				</div>
				<div class="header-box">
				&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp	<ul class="header-nav">
						<li><a href='@Url.Action("HomePage","Home")'>Home</a></li>
						<li><a href='@Url.Action("Category","Home")'>Category</a></li>
						<li><a href='@Url.Action("ContactUs","Home")'>contact</a></li>
                 @if (userRole != null && userRole == "Admin")
{
                        <li><a href='@Url.Action("AdminDashboard","Admin")'>DashBoard</a></li>
                    }
					</ul>
					<ul class="header-options" style="margin-right:50px">
						<li><a href="#"><i class="icon-search"></i></a></li>
                       
                   
@if (Session["Account_id"] == null)
{
    // If "Account_id" is null, show the sign-in icon
    <li><a href='@Url.Action("SignIn","Accounts")'><i class="icon-user"></i></a></li>
}

                        

						<li><a href='@Url.Action("ShowFavourite","WishList")'><i class="icon-heart"></i></a></li>
						<li><a href='@Url.Action("ShowCart","Cart")'><i class="icon-cart"></i></a></li>
                             @if (Session["Account_id"] != null)
{ 
    // If "Account_id" exists, show the user icon, not the sign-out icon
    <li><a href='@Url.Action("Logout","Accounts")'><i class="fa fa-sign-in" style="font-size:30px"></i></a></li>
}
					</ul>
				</div>

				<div class="btn-menu js-btn-menu"><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span></div>
			</div>
		</header>

		<!-- HEADER EOF   -->

		<!-- BEGIN FOOTER -->

		<footer class="footer">
			<div class="wrapper">
				<div class="footer-top">
					<div class="footer-top__social">
						<span>Find us here:</span>
						<ul>
							<li><a href="https://www.facebook.com/"><i class="icon-facebook"></i></a></li>
							<li><a href="https://twitter.com/?lang=en"><i class="icon-twitter"></i></a></li>
							<li><a href="https://www.instagram.com/"><i class="icon-insta"></i></a></li>
							<li><a href="https://pk.linkedin.com/"><i class="icon-in"></i></a></li>
						</ul>
					</div>
					<div class="footer-top__logo">
						<img data-src=@Url.Content("/Content/img/footer-logo.svg") src="data:image/gif;base64,R0lGODlhAQABAAAAACw="
							class="js-img" alt="">
					</div>
					<div class="footer-top__payments">
						    
						<ul>
							
						</ul>
					</div>
				</div>
				<div class="footer-nav">
					
					<div class="footer-nav__col">
						<span class="footer-nav__col-title">Categories</span>
						<ul>
                                    <li><a href='@Url.Action("Shop", "Home", new {  Check = "Makeup" })'>Make up <span></span></a></li>
                                    <li><a href='@Url.Action("Shop", "Home", new {  Check = "Eyes" })'>Eyes <span></span></a></li>
                                    <li><a href='@Url.Action("Shop", "Home", new {  Check = "Purfume" })'>Perfume <span></span></a></li>
                                    <li><a href='@Url.Action("Shop", "Home", new {  Check = "Lips" })'>Lips </a></li>
                                    <li><a href='@Url.Action("Shop", "Home", new {  Check = "Skin Care" })'>Skin care <span></span></a></li>
						</ul>
					</div>
					<div class="footer-nav__col">
						<span class="footer-nav__col-title">Useful links</span>
						<ul>
							<li><a href='@Url.Action("HomePage","Home")'>Home</a></li>
							<li><a href='@Url.Action("ShowCart","Cart")'>Cart</a></li>
							<li><a href='@Url.Action("ShowFavourite","WishList")'>WhishList</a></li>
							<li><a href='@Url.Action("Category","Home")'>Category</a></li>
						</ul>
					</div>
					<div class="footer-nav__col">
						<span class="footer-nav__col-title">Contact</span>
						<ul>
							<li><i class="icon-map-pin"></i> Islamabad, Pakistan</li>
							<li>
								<i class="icon-smartphone"></i>
								<div class="footer-nav__col-phones">
									<a href="tel:+13459971345">+9203360000000</a>
									<a href="tel:+13457464975">+9203360000000</a>
								</div>
							</li>
							<li><i class="icon-mail"></i><a href="mailto:info@beshop.com">glowifybeauty@beshop.com</a></li>
						</ul>
					</div>
				</div>
				
			</div>
		</footer>

		<!-- FOOTER EOF   -->

    </div>

    <div class="icon-load"></div>

    <!-- BODY EOF   -->

    <script src=@Url.Content("/Content/js/jquery-3.5.1.min.js")></script>
    <script src=@Url.Content("/Content/js/lazyload.min.js")></script>
    <script src=@Url.Content("/Content/js/slick.min.js")></script>
    <script src=@Url.Content("/Content/js/jquery.maskedinput.js")></script>
    <script src=@Url.Content("/Content/js/rating.js")></script>
    <script src=@Url.Content("/Content/js/custom.js")></script>
</body>

</html>